
<h3>My profile</h3>
<% my_profile = @user.photo.blank? ? "admin_avatar.png" : idea.photo %>

<div class="card"
              style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.2)),
                  url('<%= cl_image_path my_profile, height: 300, width: 400, crop: :fill %>')"
         ></div>

<p> <%= @user.first_name %> - <%= @user.last_name %> </p>
<p> <%= @user.email %></p>
<p> <%= @user.description %></p>

<h3>My ideas</h3>
<table>
  <thead>
    <tr>
      <th>Idea</th>
      <th>Booking status</th>
    </tr>
  </thead>
  <tbody>
      <% @ideas.each do |idea|%>
        <tr>
          <td><%= idea.title %></td>
          <% if idea.bookings.count == 0 %>
            <td><p>No one cares about your idea</p></td>
          <% else %>
            <% booking = idea.bookings.first %>
            <% renter = booking.user %>
            <% if booking.validated.nil? %>
              <td><p><%= renter.first_name  %> would like to rent your idea</p></td>
              <td>
                <%= link_to "Validate", accept_booking_path(booking), method: :patch, class: "btn btn-xs btn-success"  %>
              </td>
              <td>
                <%= link_to "Decline", decline_booking_path(booking), method: :patch, class: "btn btn-xs btn-danger"  %>
              </td>
            <% elsif booking.validated %>
              <td><p><%= renter.first_name  %> has rented your idea</p></td>
            <% else  %>
              <td><p>You've declinded <%= renter.first_name  %>'s request<p></td>
            <% end %>
          <% end %>
        </tr>
        <% end %>
  </tbody>
</table>

<br>

<h3>My bookings</h3>
<% @bookings.each do |booking|%>
  <p>
    <%= booking.idea.title %>
  </p>
<% end %>
