<div class="home-banner""">
  <h1>Air Seed</h1>
  <p>
    <span id="banner-typed-text"></span>
  </p>
  <div class="col-sm-10 col-sm-offset-1" style="margin-top: 60px;">
    <%= form_tag ideas_path, method: :get, class: "display-flex" do %>
      <div style="display: flex; flex-direction: column; align-items: flex-start; margin-right: 8px; ">
        <%= label_tag 'name' %>
        <%= text_field_tag :query,
          params[:query],
          placeholder: "Find an idea"
        %>
      </div>
      <div style="display: flex; flex-direction: column;  align-items: flex-start; margin-right: 8px;">
        <%= label_tag 'category' %>
        <%= select_tag "category",
          options_for_select(@cat.push(''),'')
        %>
      </div>
      <div style="display: flex; flex-direction: column;  align-items: flex-start; margin-right: 8px;">
        <%= label_tag 'max price' %>
        <%= number_field_tag 'max_price',
          params[:max_price],
          placeholder: "Maximum price"
        %>
      </div>
      <div style="display: flex; flex-direction: column;  align-items: flex-start; margin-right: 8px;">
        <%= label_tag 'start_date' %>
        <%= date_field_tag 'start_date',
            '01/01/2000',
            class: 'special_input'
        %>
      </div>
      <div style="display: flex; flex-direction: column;  align-items: flex-start; margin-right: 8px;">
        <%= label_tag 'end_date' %>
        <%= date_field_tag 'end_date',
          '01/01/2000'
        %>
      </div>
      <%= submit_tag "filter", class: 'btn btn-primary' %>
    <% end %>
  </div>
</div>

<div class="main-container">
  <div class="container">
    <p><%= @ideas.count %> ideas correspond to your search</p>
    <div class="row">
      <% @ideas.each do |idea| %>

        <% my_background = idea.photo.blank? ? "default.png" : idea.photo %>
        <div class="col-xs-12 col-sm-4">

          <%= link_to idea_path(idea) do %>
            <div class="card"
                 style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.2)),
                     url('<%= cl_image_path my_background, height: 300, width: 400, crop: :fill %>')"
            >
              <div class="card-category"><%= idea.title %></div>
                <div class="card-description">
                  <p><%= idea.category %></p>
                </div>
              </div>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>

  <div
    id="map"
    style="width: 100%;"
    data-markers="<%= @markers.to_json %>"
    data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
  ></div>

</div>
