<% my_background = idea.photo.blank? ? "/assets/question-lightbulb.jpg" : idea.photo %>
<%= link_to idea_path(idea) do %>
  <article class="card card--1"
  style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.2)),
      url('<%= cl_image_path my_background, height: 300, width: 400, crop: :fill %>')">
    <div class="card__info-hover" style="color:white">
      <svg class="card__like"   viewBox="0 0 24 24">
        <path fill="#fff" d="M12.1,18.55L12,18.65L11.89,18.55C7.14,14.24 4,11.39 4,8.5C4,6.5 5.5,5 7.5,5C9.04,5 10.54,6 11.07,7.36H12.93C13.46,6 14.96,5 16.5,5C18.5,5 20,6.5 20,8.5C20,11.39 16.86,14.24 12.1,18.55M16.5,3C14.76,3 13.09,3.81 12,5.08C10.91,3.81 9.24,3 7.5,3C4.42,3 2,5.41 2,8.5C2,12.27 5.4,15.36 10.55,20.03L12,21.35L13.45,20.03C18.6,15.36 22,12.27 22,8.5C22,5.41 19.58,3 16.5,3Z" />
      </svg>
      <div class="card__clock-info">
        <span class="card__time">$ <%= idea.pricing %></span>
      </div>

    </div>
    <div class="card__img"
    style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.2)),
        url('<%= cl_image_path my_background, height: 300, width: 400, crop: :fill %>')"></div>
      <div class="card__img--hover"
      style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.2)),
          url('<%= cl_image_path my_background, height: 300, width: 400, crop: :fill %>')"
      ></div>
    </a>
    <div class="card__info">
      <% category = idea.category.length > 12 ? "#{idea.category[0..12]}..." : idea.category%>
      <% title = idea.title.length > 15 ? "#{idea.title[0..15]}..." : idea.title%>
      <span class="card__category"> <%= category  %></span>
      <h3 class="card__title"><%= title  %></h3>
      <div class="card-footer">
        <div class="author">
        <% if idea.is_ad %>
          <span class="card__by"><a href="#" class="card__ad" title="author">sponsored idea</a></span>
        <% else %>
          <span class="card__by">by <a href="#" class="card__author" title="author"><%= idea.user.first_name  %></a></span>
        <% end %>
        </div>
        <div class="booking-status">
          <% if idea.bookings.where(validated: true).count > 0 %>
            <span class="card__by">booked</span>
            <span class="card__by"><i class="fas fa-circle" style="color: red"></i></span>
          <% else %>
            <span class="card__by">available</span>
            <span class="card__by"><i class="fas fa-circle" style="color: green"></i></span>
          <% end %>
        </div>
      </div>
    </div>
  </article>
<% end %>

